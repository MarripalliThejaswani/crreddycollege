<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library | Sir C R Reddy College of Pharmaceutical Sciences</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0a9efb;
            --secondary-color: #fe5a5a;
            --accent-color: #24d5e8;
            --light-color: #f1faee;
            --dark-color: #101110;
            --gradient-1: linear-gradient(135deg, #952baf, #457b9d);
            --gradient-2: linear-gradient(135deg, #e63946, #f3722c);
            --sidebar-width: 280px;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background-color: #f8f9fa;
            color: #333;
            overflow-x: hidden;
        }
        
        /* Loading animation */
        .loader-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-color);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        .loader {
            width: 48px;
            height: 48px;
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            animation: slideDown 0.8s ease;
        }
        @keyframes slideDown {
            from {
                transform: translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .logo img {
            height: 60px;
            border-radius: 50%;
            border: 2px solid white;
            transition: all 0.3s ease;
        }
        .logo img:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }
        .logo-text h1 {
            font-size: 1.5rem;
            font-weight: 700;
        }
        .logo-text p {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .contact-info {
            display: flex;
            gap: 1.5rem;
        }
        .contact-info p {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* Header Login Dropdown */
        .header-login {
            position: relative;
        }
        
        .login-dropdown-btn {
            background: var(--gradient-2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .login-dropdown-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .login-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
            margin-top: 5px;
        }
        
        .login-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }
        
        .login-dropdown-item {
            padding: 12px 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--dark-color);
            text-decoration: none;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .login-dropdown-item:last-child {
            border-bottom: none;
        }
        
        .login-dropdown-item:hover {
            background: #f8f9fa;
            color: var(--secondary-color);
            padding-left: 20px;
        }
        
        .login-dropdown-item i {
            width: 20px;
            text-align: center;
        }
        
        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: var(--sidebar-width);
            background: var(--gradient-1);
            color: white;
            z-index: 999;
            overflow-y: auto;
            transition: transform 0.3s ease;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            padding-top: 100px;
        }
        .nav-menu {
            list-style: none;
            padding: 20px 0;
        }
        .nav-menu li {
            position: relative;
        }
        .nav-menu a {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            text-decoration: none;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }
        .nav-menu a i {
            margin-right: 15px;
            font-size: 18px;
            width: 25px;
            text-align: center;
        }
        .nav-menu a::before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 4px;
            background: var(--secondary-color);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }
        .nav-menu a:hover::before,
        .nav-menu a.active::before {
            transform: scaleY(1);
        }
        .nav-menu a:hover,
        .nav-menu a.active {
            background: rgba(255, 255, 255, 0.1);
            padding-left: 35px;
        }
        .login-section {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        .login-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .login-btn {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            text-align: left;
            position: relative;
            overflow: hidden;
        }
        .login-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }
        .login-btn:hover::before {
            left: 100%;
        }
        .login-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        .login-btn.student {
            border-left: 3px solid var(--secondary-color);
        }
        .login-btn.parent {
            border-left: 3px solid #2a9d8f;
        }
        .login-btn.library {
            border-left: 3px solid #577590;
        }
        
        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            padding-top: 100px;
            transition: margin-left 0.3s ease;
        }
        
        /* Page Header */
        .page-header {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://picsum.photos/seed/library-page/1600/400.jpg');
            background-size: cover;
            background-position: center;
            padding: 80px 0;
            text-align: center;
            color: white;
        }
        .page-header h1 {
            font-size: 42px;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        .page-header p {
            font-size: 20px;
            max-width: 800px;
            margin: 0 auto;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 30px;
        }
        
        /* Library Stats */
        .library-stats {
            background: var(--gradient-1);
            color: white;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            text-align: center;
        }
        .stat-item {
            padding: 15px;
        }
        .stat-number {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .stat-label {
            font-size: 16px;
            opacity: 0.9;
        }
        
        /* Form Section */
        .form-section {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.3s ease;
        }
        .form-section.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .form-section:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        .form-title {
            font-size: 28px;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent-color);
            position: relative;
        }
        .form-title::after {
            content: "";
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--secondary-color);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--accent-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(69, 123, 157, 0.2);
        }
        .form-row {
            display: flex;
            gap: 20px;
        }
        .form-row .form-group {
            flex: 1;
        }
        .submit-btn {
            background: var(--gradient-2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 20px auto 0;
            font-size: 16px;
        }
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Dashboard Section */
        .dashboard {
            display: none;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            padding: 30px;
            margin-bottom: 30px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.3s ease;
        }
        .dashboard.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .dashboard:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }
        .dashboard-title {
            font-size: 28px;
            color: var(--primary-color);
        }
        .logout-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .logout-btn:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .student-info {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .info-item {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--accent-color);
        }
        .info-item h4 {
            color: var(--primary-color);
            margin-bottom: 5px;
            font-size: 14px;
            text-transform: uppercase;
        }
        .info-item p {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
        }
        
        /* Library Resources Cards */
        .library-resources {
            margin-top: 30px;
        }
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .card {
            background: #f9f9f9;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            padding: 20px;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--gradient-1);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 20px;
            flex-shrink: 0;
        }
        .card-icon i {
            font-size: 24px;
            color: white;
        }
        .card-content {
            flex-grow: 1;
        }
        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        .card-text {
            color: #666;
            font-size: 14px;
        }
        
        /* Data Management Section */
        .data-management {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .data-title {
            font-size: 20px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        .data-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        .data-btn {
            padding: 8px 16px;
            background: var(--gradient-1);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        .data-btn:hover {
            background: var(--gradient-2);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* Visit History Section */
        .visit-history {
            margin-top: 30px;
        }
        .history-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        .history-table thead {
            background: var(--gradient-1);
            color: white;
        }
        .history-table th, .history-table td {
            padding: 12px;
            text-align: left;
        }
        .history-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .history-table tbody tr:hover {
            background-color: #f1f1f1;
        }
        .no-records {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        /* New Login Button */
        .new-login-btn {
            background: var(--gradient-2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 20px auto 0;
            font-size: 16px;
        }
        .new-login-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Logout Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }
        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: slideUp 0.3s ease;
        }
        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close:hover {
            color: var(--secondary-color);
        }
        .modal-header {
            margin-bottom: 20px;
        }
        .modal-header h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        .modal-header p {
            color: #666;
        }
        
        /* Footer */
        footer {
            background: var(--dark-color);
            color: white;
            padding: 40px 0 20px;
            margin-left: var(--sidebar-width);
            transition: margin-left 0.3s ease;
        }
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        .footer-section h3::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: var(--secondary-color);
        }
        .footer-section p, .footer-section li {
            margin-bottom: 10px;
            opacity: 0.8;
        }
        .footer-section ul {
            list-style: none;
        }
        .footer-section a {
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .footer-section a:hover {
            color: var(--secondary-color);
            padding-left: 5px;
        }
        .footer-bottom {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
            opacity: 0.7;
        }
        
        /* Back to top button */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--secondary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 99;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        .back-to-top:hover {
            background: var(--primary-color);
            transform: translateY(-5px);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content,
            footer {
                margin-left: 0;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .page-header h1 {
                font-size: 36px;
            }
            
            .header-login {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .page-header h1 {
                font-size: 28px;
            }
            
            .page-header p {
                font-size: 16px;
            }
            
            .contact-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .container {
                padding: 20px 15px;
            }
            
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .student-info {
                grid-template-columns: 1fr;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
            }
            
            .data-buttons {
                flex-direction: column;
            }
            
            .history-table {
                font-size: 14px;
            }
            
            .history-table th, .history-table td {
                padding: 8px;
            }
            
            .stat-number {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading animation -->
    <div class="loader-wrapper" id="loader">
        <div class="loader"></div>
    </div>
    
    <!-- Header -->
    <header id="header">
        <div class="header-container">
            <div class="logo">
                <button class="menu-toggle" id="menuToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTr0c7HRkWsP4itqkA1pJmAsL79cvxdkyta0w&s" alt="College Logo">
                <div class="logo-text">
                    <h1>Sir C R Reddy College</h1>
                    <p>of Pharmaceutical Sciences, Eluru</p>
                </div>
            </div>
            <div class="contact-info">
                <p><i class="fas fa-phone-alt"></i> +91 8812 234 567</p>
                <p><i class="fas fa-envelope"></i> info@crreddypharmacy.edu.in</p>
                
                <!-- Header Login Dropdown -->
              <div class="header-login">
                    <button class="login-dropdown-btn" id="headerLoginBtn">
                        <i class="fas fa-sign-in-alt"></i> Login
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="login-dropdown" id="headerLoginDropdown">
                        <a href="studentrecord.html" class="login-dropdown-item">
                            <i class="fas fa-user-graduate"></i> Student Login
                        </a>
                        <a href="studentrecord.html" class="login-dropdown-item">
                            <i class="fas fa-user-friends"></i> Parent Login
                        </a>
                        <a href="libraray.html" class="login-dropdown-item">
                            <i class="fas fa-book"></i> Library Login
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <ul class="nav-menu">
            <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="about.html"><i class="fas fa-info-circle"></i> About Us</a></li>
            <li><a href="courses.html"><i class="fas fa-graduation-cap"></i> Courses</a></li>
            <li><a href="faculty.html"><i class="fas fa-chalkboard-teacher"></i> Faculty</a></li>
            <li><a href="circulars.html"><i class="fas fa-calendar"></i> Circulars</a></li>
            <li><a href="admissions.html"><i class="fas fa-user-plus"></i> Admissions</a></li>
            <li><a href="library.html" class="active"><i class="fas fa-book-open"></i> Library</a></li>
            <li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
            <li><a href="result.html"><i class="fas fa-chart-bar"></i> Results Portal</a></li>
        </ul>
        
        <div class="login-section">
            <h3 style="margin-bottom: 15px; font-size: 16px;">Quick Login</h3>
            <div class="login-buttons">
                 <button class="login-btn student">
                    <a href="studentrecord.html" style="text-decoration: none; color: white;"><i class="fas fa-user-graduate"></i> Student Login </a>
                </button>
                <button class="login-btn parent">
                  <a href="studentrecord.html" style="text-decoration: none; color: white;"> <i class="fas fa-user-friends"></i> Parent Login</a> 
                </button>
                <button class="login-btn library">
                   <a href="libraray.html" style="text-decoration: none; color: white;"> <i class="fas fa-book"></i> Library Login</a> 
                </button>
            </div>
        </div>
    </nav>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <div class="container">
                <h1>College Library</h1>
                <p>Access to knowledge resources and learning materials</p>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="container">
            <!-- Library Stats -->
            <div class="library-stats">
                <div class="stat-item">
                    <div class="stat-number">25,000+</div>
                    <div class="stat-label">Books & Journals</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">5,000+</div>
                    <div class="stat-label">E-Resources</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100+</div>
                    <div class="stat-label">Research Databases</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">24/7</div>
                    <div class="stat-label">Digital Access</div>
                </div>
            </div>
            
            <!-- Library Login Form -->
            <section id="libraryLogin" class="form-section">
                <h2 class="form-title">Library Login</h2>
                <form id="libraryLoginForm">
                    <div class="form-group">
                        <label for="studentName">Student Name</label>
                        <input type="text" id="studentName" name="studentName" placeholder="Enter your full name" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="course">Course</label>
                            <select id="course" name="course" required>
                                <option value="">Select Course</option>
                                <option value="B.Pharm">B.Pharm</option>
                                <option value="M.Pharm">M.Pharm</option>
                                <option value="Pharm.D">Pharm.D</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="year">Year</label>
                            <select id="year" name="year" required>
                                <option value="">Select Year</option>
                                <option value="1st Year">1st Year</option>
                                <option value="2nd Year">2nd Year</option>
                                <option value="3rd Year">3rd Year</option>
                                <option value="4th Year">4th Year</option>
                                <option value="5th Year">5th Year</option>
                                <option value="6th Year">6th Year</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="currentDate">Current Date</label>
                            <input type="date" id="currentDate" name="currentDate" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="inTime">In Time</label>
                            <input type="time" id="inTime" name="inTime" required>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">Enter Library</button>
                </form>
            </section>
            
            <!-- Library Dashboard -->
            <section id="libraryDashboard" class="dashboard">
                <div class="dashboard-header">
                    <h2 class="dashboard-title">Library Dashboard</h2>
                    <button class="logout-btn" id="logoutBtn" style="display: none;">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
                
                <div class="student-info">
                    <div class="info-item">
                        <h4>Student Name</h4>
                        <p id="displayName">-</p>
                    </div>
                    <div class="info-item">
                        <h4>Course</h4>
                        <p id="displayCourse">-</p>
                    </div>
                    <div class="info-item">
                        <h4>Year</h4>
                        <p id="displayYear">-</p>
                    </div>
                    <div class="info-item">
                        <h4>Date</h4>
                        <p id="displayDate">-</p>
                    </div>
                    <div class="info-item">
                        <h4>In Time</h4>
                        <p id="displayInTime">-</p>
                    </div>
                    <div class="info-item">
                        <h4>Status</h4>
                        <p id="displayStatus">-</p>
                    </div>
                    <div class="info-item" id="outTimeItem" style="display: none;">
                        <h4>Out Time</h4>
                        <p id="displayOutTime">-</p>
                    </div>
                    <div class="info-item" id="durationItem" style="display: none;">
                        <h4>Duration</h4>
                        <p id="displayDuration">-</p>
                    </div>
                </div>
                
                <div class="library-resources">
                    <h3 style="margin-bottom: 20px; color: var(--primary-color);">Available Resources</h3>
                    <div class="cards-grid">
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">Text Books</h3>
                                <p class="card-text">Access to all prescribed textbooks for your course</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-journal-whills"></i>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">Reference Books</h3>
                                <p class="card-text">Extensive collection of reference materials</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-icon">
                                <i class="fas fa-laptop"></i>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">Digital Resources</h3>
                                <p class="card-text">E-books, journals, and online databases</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Data Management Section -->
                <div class="data-management">
                    <h3 class="data-title">Data Management</h3>
                    <div class="data-buttons">
                        <button class="data-btn" id="exportDataBtn">
                            <i class="fas fa-download"></i> Export Data
                        </button>
                        <button class="data-btn" id="importDataBtn">
                            <i class="fas fa-upload"></i> Import Data
                        </button>
                        <button class="data-btn" id="clearHistoryBtn">
                            <i class="fas fa-trash"></i> Clear My History
                        </button>
                        <input type="file" id="importFile" style="display: none;" accept=".json">
                    </div>
                </div>
                
                <!-- Visit History Section -->
                <div class="visit-history">
                    <h3 class="data-title">My Visit History</h3>
                    <div id="historyContainer">
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>In Time</th>
                                    <th>Out Time</th>
                                    <th>Duration</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <tr>
                                    <td colspan="5" class="no-records">No visit records found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- New Login Button -->
                <button class="new-login-btn" id="newLoginBtn" style="display: none;">
                    <i class="fas fa-sign-in-alt"></i> New Login
                </button>
            </section>
        </div>
    </div>
    
    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>About Us</h3>
                <p>Sir C R Reddy College of Pharmaceutical Sciences is a premier institution dedicated to excellence in pharmaceutical education and research.</p>
                <p>Established in 2007, we have been nurturing skilled pharmacists who contribute significantly to the healthcare sector.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About Us</a></li>
                    <li><a href="courses.html">Courses</a></li>
                    <li><a href="admissions.html">Admissions</a></li>
                    <li><a href="faculty.html">Faculty</a></li>
                    <li><a href="research.html">Research</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p><i class="fas fa-map-marker-alt"></i> Eluru, Andhra Pradesh 534007</p>
                <p><i class="fas fa-phone"></i> +91 8812-234567</p>
                <p><i class="fas fa-envelope"></i> info@scrreddypharmacy.edu.in</p>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i> Facebook</a><br>
                    <a href="#"><i class="fab fa-twitter"></i> Twitter</a><br>
                    <a href="#"><i class="fab fa-instagram"></i> Instagram</a><br>
                    <a href="#"><i class="fab fa-linkedin"></i> LinkedIn</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Sir C R Reddy College of Pharmaceutical Sciences. All Rights Reserved.</p>
        </div>
    </footer>
    
    <!-- Logout Modal -->
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h2>Library Logout</h2>
                <p>Please enter your out time before logging out</p>
            </div>
            <form id="logoutForm">
                <div class="form-group">
                    <label for="outTime">Out Time</label>
                    <input type="time" id="outTime" name="outTime" required>
                </div>
                <button type="submit" class="submit-btn">Confirm Logout</button>
            </form>
        </div>
    </div>
    
    <!-- Back to top button -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>
    
    <script>
        // Wait for page to load
        window.addEventListener('load', () => {
            // Hide loader
            document.getElementById('loader').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                
                // Animate form section on scroll
                const observerOptions = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };
                
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, observerOptions);
                
                document.querySelectorAll('.form-section').forEach(section => {
                    observer.observe(section);
                });
            }, 500);
            
            // Set current date
            const today = new Date();
            const dateStr = today.toISOString().split('T')[0];
            document.getElementById('currentDate').value = dateStr;
            
            // Set current time
            const hours = today.getHours();
            const minutes = today.getMinutes();
            const timeStr = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
            document.getElementById('inTime').value = timeStr;
            
            // Clean old records (older than 1 year)
            cleanOldRecords();
            
            // Check if user is already logged in
            const currentStudent = JSON.parse(localStorage.getItem('currentStudent'));
            if (currentStudent) {
                // Show dashboard
                document.getElementById('libraryLogin').style.display = 'none';
                document.getElementById('libraryDashboard').classList.add('active');
                
                // Populate dashboard with student data
                updateDashboard(currentStudent);
                
                // Load visit history
                loadVisitHistory(currentStudent.studentName, currentStudent.course, currentStudent.year);
                
                // Show/hide elements based on status
                updateDashboardUI(currentStudent.status);
            }
        });
        
        // Function to update dashboard with student data
        function updateDashboard(student) {
            document.getElementById('displayName').textContent = student.studentName;
            document.getElementById('displayCourse').textContent = student.course;
            document.getElementById('displayYear').textContent = student.year;
            document.getElementById('displayDate').textContent = student.date;
            
            // Format time to AM/PM
            const formatTime = (timeStr) => {
                if (!timeStr) return '-';
                const [hours, minutes] = timeStr.split(':');
                const hoursInt = parseInt(hours);
                const amPm = hoursInt >= 12 ? 'PM' : 'AM';
                const displayHours = hoursInt % 12 || 12;
                return `${displayHours}:${minutes} ${amPm}`;
            };
            
            document.getElementById('displayInTime').textContent = formatTime(student.inTime);
            document.getElementById('displayStatus').textContent = student.status;
            
            // Show out time and duration if available
            if (student.outTime) {
                document.getElementById('displayOutTime').textContent = formatTime(student.outTime);
                document.getElementById('outTimeItem').style.display = 'block';
            } else {
                document.getElementById('outTimeItem').style.display = 'none';
            }
            
            if (student.duration) {
                document.getElementById('displayDuration').textContent = student.duration;
                document.getElementById('durationItem').style.display = 'block';
            } else {
                document.getElementById('durationItem').style.display = 'none';
            }
        }
        
        // Function to update dashboard UI based on status
        function updateDashboardUI(status) {
            const logoutBtn = document.getElementById('logoutBtn');
            const newLoginBtn = document.getElementById('newLoginBtn');
            
            if (status === 'In Library') {
                logoutBtn.style.display = 'flex';
                newLoginBtn.style.display = 'none';
            } else {
                logoutBtn.style.display = 'none';
                newLoginBtn.style.display = 'block';
            }
        }
        
        // Function to clean old records (older than 1 year)
        function cleanOldRecords() {
            try {
                const libraryRecords = JSON.parse(localStorage.getItem('libraryRecords')) || [];
                const oneYearAgo = new Date();
                oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                
                const filteredRecords = libraryRecords.filter(record => {
                    const recordDate = new Date(record.date);
                    return recordDate >= oneYearAgo;
                });
                
                if (filteredRecords.length !== libraryRecords.length) {
                    localStorage.setItem('libraryRecords', JSON.stringify(filteredRecords));
                    console.log(`Cleaned ${libraryRecords.length - filteredRecords.length} old records`);
                }
            } catch (error) {
                console.error('Error cleaning old records:', error);
            }
        }
        
        // Function to load visit history for a student
        function loadVisitHistory(studentName, course, year) {
            try {
                const libraryRecords = JSON.parse(localStorage.getItem('libraryRecords')) || [];
                const studentRecords = libraryRecords.filter(record => 
                    record.studentName === studentName && 
                    record.course === course && 
                    record.year === year
                );
                
                const historyTableBody = document.getElementById('historyTableBody');
                historyTableBody.innerHTML = '';
                
                if (studentRecords.length === 0) {
                    historyTableBody.innerHTML = '<tr><td colspan="5" class="no-records">No visit records found</td></tr>';
                    return;
                }
                
                // Sort records by date (newest first)
                studentRecords.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                studentRecords.forEach(record => {
                    const row = document.createElement('tr');
                    
                    // Format date
                    const date = new Date(record.date);
                    const formattedDate = date.toLocaleDateString();
                    
                    // Format times
                    const formatTime = (timeStr) => {
                        if (!timeStr) return '-';
                        const [hours, minutes] = timeStr.split(':');
                        const hoursInt = parseInt(hours);
                        const amPm = hoursInt >= 12 ? 'PM' : 'AM';
                        const displayHours = hoursInt % 12 || 12;
                        return `${displayHours}:${minutes} ${amPm}`;
                    };
                    
                    const inTime = formatTime(record.inTime);
                    const outTime = formatTime(record.outTime);
                    
                    row.innerHTML = `
                        <td>${formattedDate}</td>
                        <td>${inTime}</td>
                        <td>${outTime}</td>
                        <td>${record.duration || '-'}</td>
                        <td>${record.status}</td>
                    `;
                    
                    historyTableBody.appendChild(row);
                });
            } catch (error) {
                console.error('Error loading visit history:', error);
                document.getElementById('historyTableBody').innerHTML = 
                    '<tr><td colspan="5" class="no-records">Error loading records</td></tr>';
            }
        }
        
        // Function to export data
        function exportData() {
            try {
                const data = {
                    libraryRecords: JSON.parse(localStorage.getItem('libraryRecords')) || [],
                    studentProfiles: JSON.parse(localStorage.getItem('studentProfiles')) || [],
                    exportDate: new Date().toISOString()
                };
                
                const dataStr = JSON.stringify(data, null, 2);
                const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                
                const exportFileDefaultName = `library_data_${new Date().toISOString().split('T')[0]}.json`;
                
                const linkElement = document.createElement('a');
                linkElement.setAttribute('href', dataUri);
                linkElement.setAttribute('download', exportFileDefaultName);
                linkElement.click();
                
                alert('Data exported successfully!');
            } catch (error) {
                console.error('Error exporting data:', error);
                alert('Error exporting data. Please try again.');
            }
        }
        
        // Function to import data
        function importData() {
            document.getElementById('importFile').click();
        }
        
        // Function to clear student history
        function clearStudentHistory() {
            if (confirm('Are you sure you want to clear your visit history? This action cannot be undone.')) {
                try {
                    const currentStudent = JSON.parse(localStorage.getItem('currentStudent'));
                    if (!currentStudent) {
                        alert('No active student session found.');
                        return;
                    }
                    
                    let libraryRecords = JSON.parse(localStorage.getItem('libraryRecords')) || [];
                    const initialCount = libraryRecords.length;
                    
                    // Remove records for current student
                    libraryRecords = libraryRecords.filter(record => 
                        !(record.studentName === currentStudent.studentName && 
                          record.course === currentStudent.course && 
                          record.year === currentStudent.year)
                    );
                    
                    localStorage.setItem('libraryRecords', JSON.stringify(libraryRecords));
                    
                    // Update student profile
                    let studentProfiles = JSON.parse(localStorage.getItem('studentProfiles')) || [];
                    const profileIndex = studentProfiles.findIndex(profile => 
                        profile.studentName === currentStudent.studentName && 
                        profile.course === currentStudent.course && 
                        profile.year === currentStudent.year
                    );
                    
                    if (profileIndex !== -1) {
                        studentProfiles[profileIndex].totalVisits = 0;
                        localStorage.setItem('studentProfiles', JSON.stringify(studentProfiles));
                    }
                    
                    // Reload visit history
                    loadVisitHistory(currentStudent.studentName, currentStudent.course, currentStudent.year);
                    
                    alert(`Cleared ${initialCount - libraryRecords.length} visit records.`);
                } catch (error) {
                    console.error('Error clearing history:', error);
                    alert('Error clearing history. Please try again.');
                }
            }
        }
        
        // Mobile menu toggle
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('active');
            
            // Adjust main content and footer margin when sidebar is toggled
            if (window.innerWidth <= 992) {
                if (sidebar.classList.contains('active')) {
                    document.body.style.overflow = 'hidden'; // Prevent body scroll when sidebar is open
                } else {
                    document.body.style.overflow = ''; // Restore body scroll
                }
            }
        });
        
        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 992 && 
                !sidebar.contains(e.target) && 
                !menuToggle.contains(e.target) && 
                sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
                document.body.style.overflow = ''; // Restore body scroll
            }
        });
        
        // Header login dropdown functionality
        const headerLoginBtn = document.getElementById('headerLoginBtn');
        const headerLoginDropdown = document.getElementById('headerLoginDropdown');
        
        headerLoginBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            headerLoginDropdown.classList.toggle('active');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            headerLoginDropdown.classList.remove('active');
        });
        
        // Prevent dropdown from closing when clicking inside
        headerLoginDropdown.addEventListener('click', (e) => {
            e.stopPropagation();
        });
        
        // // Login dropdown item functionality
        // document.querySelectorAll('.login-dropdown-item').forEach(item => {
        //     item.addEventListener('click', function(e) {
        //         e.preventDefault();
        //         const loginType = this.textContent.trim();
        //         alert(`${loginType} portal will be implemented soon.`);
                
        //         // Close dropdown
        //         headerLoginDropdown.classList.remove('active');
        //     });
        // });
        
        // Login button functionality
       // document.querySelectorAll('.login-btn').forEach(button => {
          //  button.addEventListener('click', function() {
           //     const loginType = this.textContent.trim();
            //    alert(`${loginType} portal will be implemented soon.`);
           // });
       // });
        
        // Library login form submission
      //  const libraryLoginForm = document.getElementById('libraryLoginForm');
      //  const libraryDashboard = document.getElementById('libraryDashboard');
        
          libraryLoginForm.addEventListener('submit', (e) => {
           e.preventDefault();
            
            // Get form values
            const studentName = document.getElementById('studentName').value;
            const course = document.getElementById('course').value;
            const year = document.getElementById('year').value;
            const currentDate = document.getElementById('currentDate').value;
            const inTime = document.getElementById('inTime').value;
            
            // Create library record object
            const record = {
                id: Date.now(), // Unique ID based on timestamp
                studentName,
                course,
                year,
                date: currentDate,
                inTime,
                status: 'In Library',
                loginTimestamp: new Date().toISOString() // Store exact login timestamp
            };
            
            // Get existing records or initialize empty array
            let libraryRecords = JSON.parse(localStorage.getItem('libraryRecords')) || [];
            
            // Add new record
            libraryRecords.push(record);
            
            // Save to localStorage
            localStorage.setItem('libraryRecords', JSON.stringify(libraryRecords));
            
            // Also save current active student separately for easy access
            localStorage.setItem('currentStudent', JSON.stringify(record));
            
            // Create a separate student profile if it doesn't exist
            let studentProfiles = JSON.parse(localStorage.getItem('studentProfiles')) || [];
            const existingProfileIndex = studentProfiles.findIndex(profile => 
                profile.studentName === studentName && profile.course === course && profile.year === year
            );
            
            if (existingProfileIndex === -1) {
                // Create new student profile
                const studentProfile = {
                    id: Date.now(),
                    studentName,
                    course,
                    year,
                    firstVisit: currentDate,
                    totalVisits: 1
                };
                studentProfiles.push(studentProfile);
            } else {
                // Update existing student profile
                studentProfiles[existingProfileIndex].totalVisits += 1;
                studentProfiles[existingProfileIndex].lastVisit = currentDate;
            }
            
            // Save student profiles to localStorage
            localStorage.setItem('studentProfiles', JSON.stringify(studentProfiles));
            
            // Hide login form and show dashboard
            document.getElementById('libraryLogin').style.display = 'none';
            libraryDashboard.classList.add('active');
            
            // Populate dashboard with student data
            updateDashboard(record);
            
            // Load visit history
            loadVisitHistory(studentName, course, year);
            
            // Update UI based on status
            updateDashboardUI('In Library');
            
            // Reset form
            libraryLoginForm.reset();
            
            // Set current date and time again for next use
            const today = new Date();
            const dateStr = today.toISOString().split('T')[0];
            document.getElementById('currentDate').value = dateStr;
            
            const hoursToday = today.getHours();
            const minutesToday = today.getMinutes();
            const timeStr = `${hoursToday.toString().padStart(2, '0')}:${minutesToday.toString().padStart(2, '0')}`;
            document.getElementById('inTime').value = timeStr;
        });
        
        // Logout functionality
        const logoutBtn = document.getElementById('logoutBtn');
        const logoutModal = document.getElementById('logoutModal');
        const closeBtn = document.querySelector('.close');
        const logoutForm = document.getElementById('logoutForm');
        
        logoutBtn.addEventListener('click', () => {
            logoutModal.style.display = 'block';
        });
        
        closeBtn.addEventListener('click', () => {
            logoutModal.style.display = 'none';
        });
        
        window.addEventListener('click', (e) => {
            if (e.target === logoutModal) {
                logoutModal.style.display = 'none';
            }
        });
        
        logoutForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get out time
            const outTime = document.getElementById('outTime').value;
            
            // Get library records
            let libraryRecords = JSON.parse(localStorage.getItem('libraryRecords')) || [];
            
            // Find active record (status = 'In Library')
            const activeRecordIndex = libraryRecords.findIndex(record => record.status === 'In Library');
            
            if (activeRecordIndex !== -1) {
                // Update record with out time and status
                libraryRecords[activeRecordIndex].outTime = outTime;
                libraryRecords[activeRecordIndex].status = 'Checked Out';
                libraryRecords[activeRecordIndex].logoutTimestamp = new Date().toISOString();
                
                // Calculate duration
                const inTime = libraryRecords[activeRecordIndex].inTime;
                const [inHours, inMinutes] = inTime.split(':').map(Number);
                const [outHours, outMinutes] = outTime.split(':').map(Number);
                
                let durationHours = outHours - inHours;
                let durationMinutes = outMinutes - inMinutes;
                
                if (durationMinutes < 0) {
                    durationHours -= 1;
                    durationMinutes += 60;
                }
                
                if (durationHours < 0) {
                    durationHours += 24;
                }
                
                libraryRecords[activeRecordIndex].duration = `${durationHours}h ${durationMinutes}m`;
                
                // Save to localStorage
                localStorage.setItem('libraryRecords', JSON.stringify(libraryRecords));
                
                // Update current student in localStorage
                const updatedStudent = libraryRecords[activeRecordIndex];
                localStorage.setItem('currentStudent', JSON.stringify(updatedStudent));
                
                // Update dashboard with new data
                updateDashboard(updatedStudent);
                
                // Update UI based on status
                updateDashboardUI('Checked Out');
                
                // Reload visit history
                loadVisitHistory(updatedStudent.studentName, updatedStudent.course, updatedStudent.year);
                
                // Show success message
                alert(`You have successfully logged out of the library. Duration: ${durationHours}h ${durationMinutes}m`);
                
                // Hide modal
                logoutModal.style.display = 'none';
                
                // Reset logout form
                logoutForm.reset();
            }
        });
        
        // New login button functionality
        document.getElementById('newLoginBtn').addEventListener('click', () => {
            // Clear current student from localStorage
            localStorage.removeItem('currentStudent');
            
            // Hide dashboard and show login form
            document.getElementById('libraryDashboard').classList.remove('active');
            document.getElementById('libraryLogin').style.display = 'block';
        });
        
        // Data management buttons
        document.getElementById('exportDataBtn').addEventListener('click', exportData);
        document.getElementById('importDataBtn').addEventListener('click', importData);
        document.getElementById('clearHistoryBtn').addEventListener('click', clearStudentHistory);
        
        // Import file input change
        document.getElementById('importFile').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                try {
                    const data = JSON.parse(event.target.result);
                    
                    // Validate data structure
                    if (data.libraryRecords && Array.isArray(data.libraryRecords)) {
                        localStorage.setItem('libraryRecords', JSON.stringify(data.libraryRecords));
                    }
                    
                    if (data.studentProfiles && Array.isArray(data.studentProfiles)) {
                        localStorage.setItem('studentProfiles', JSON.stringify(data.studentProfiles));
                    }
                    
                    alert('Data imported successfully!');
                    
                    // Reload visit history if student is logged in
                    const currentStudent = JSON.parse(localStorage.getItem('currentStudent'));
                    if (currentStudent) {
                        loadVisitHistory(currentStudent.studentName, currentStudent.course, currentStudent.year);
                    }
                } catch (error) {
                    console.error('Error importing data:', error);
                    alert('Error importing data. Please make sure the file is a valid JSON export.');
                }
            };
            reader.readAsText(file);
            
            // Reset file input
            e.target.value = '';
        });
        
        // Back to top functionality
        const backToTop = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTop.classList.add('visible');
            } else {
                backToTop.classList.remove('visible');
            }
        });
        
        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>
</body>
</html>